<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>色将棋 | miyamoto-workspaces</title>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@400;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
</head>
<body>
    <header>
        <div class="header-content">
            <h1>色将棋</h1>
            
            <!-- テーマ切り替え - ラベルなし、アイコンのみ -->
            <div class="theme-toggle">
                <div class="theme-options">
                    <button id="light-mode" class="theme-btn" title="ライトモード">
                        <i class="fas fa-sun"></i>
                    </button>
                    <button id="dark-mode" class="theme-btn" title="ダークモード">
                        <i class="fas fa-moon"></i>
                    </button>
                    <button id="system-mode" class="theme-btn" title="システム設定に合わせる">
                        <i class="fas fa-desktop"></i>
                    </button>
                </div>
            </div>
        </div>
    </header>

    <main>
        <a href="../index.html" class="back-link">← トップページに戻る</a>
        
        <!-- ゲームモード選択画面 -->
        <div id="game-mode-selection" class="content-container">
            <h2 class="content-heading">ゲームモードを選択</h2>
            <p class="content-description">対戦相手を選んでください。</p>
            
            <div class="game-mode-options">
                <div class="game-mode-option" id="human-vs-human">
                    <i class="fas fa-user"></i>
                    <span>対人戦</span>
                    <p>二人で交互に駒を動かして対戦します</p>
                </div>
                <div class="game-mode-option" id="human-vs-ai">
                    <i class="fas fa-robot"></i>
                    <span>AI対戦</span>
                    <p>コンピュータと対戦します</p>
                </div>
            </div>
        </div>
        
        <!-- ゲーム画面 -->
        <div id="game-container" class="content-container" style="display: none;">
            
            <!-- ゲームモード表示 -->
            <div id="game-mode-display" class="game-mode-display">対人戦モード</div>
            
            <!-- ゲームエリア -->
            <div class="game-area">
                <!-- 相手の持ち駒エリア -->
                <div id="opponent-captured" class="captured-pieces opponent">
                    <!-- 持ち駒はJSで動的に追加 -->
                </div>
                
                <!-- 将棋盤 -->
                <div id="shogi-board" class="shogi-board">
                    <!-- 将棋盤はJSで動的に生成 -->
                </div>
                
                <!-- 自分の持ち駒エリア -->
                <div id="player-captured" class="captured-pieces player">
                    <!-- 持ち駒はJSで動的に追加 -->
                </div>
            </div>
            
            <!-- 手番表示エリア -->
            <div id="turn-display" class="turn-display">先手（あなた）の番です</div>
            
            <!-- 操作ボタンエリア -->
            <div class="control-buttons">
                <button id="reset-button" class="btn">
                    <i class="fas fa-redo"></i> リセット
                </button>
                <button id="back-to-menu-button" class="btn">
                    <i class="fas fa-arrow-left"></i> メニューに戻る
                </button>
                <button id="help-button" class="btn">
                    <i class="fas fa-question-circle"></i> ヘルプ
                </button>
                <button id="settings-button" class="btn">
                    <i class="fas fa-cog"></i> 設定
                </button>
            </div>
            
            <!-- 説明文 -->
            <p class="content-description game-description">色将棋｜将棋初心者でも直感的に遊べる視覚的にわかりやすい将棋ゲームです。</p>
        </div>
        
        <!-- 設定ダイアログ -->
        <div id="settings-dialog" class="dialog" style="display: none;">
            <div class="dialog-content">
                <h3>ゲーム設定</h3>
                <div class="settings-options">
                    <div class="setting-option">
                        <label for="show-movable-cells">移動可能マス表示</label>
                        <button id="show-movable-cells" class="toggle-btn active">ON</button>
                    </div>
                    <div class="setting-option">
                        <label for="show-capturable-marks">駒を取る・取られる表示</label>
                        <button id="show-capturable-marks" class="toggle-btn active">ON</button>
                    </div>
                </div>
                <button id="close-settings" class="btn">閉じる</button>
            </div>
        </div>
        
        <!-- AI設定画面 -->
        <div id="ai-settings" class="content-container" style="display: none;">
            <h2 class="content-heading">AI対戦設定</h2>
            <p class="content-description">AI対戦の設定を行ってください。</p>
            
            <div class="ai-settings-form">
                <div class="setting-group">
                    <h3>難易度</h3>
                    <div class="radio-buttons">
                        <label>
                            <input type="radio" name="difficulty" value="beginner" checked>
                            <span>初級</span>
                        </label>
                        <label>
                            <input type="radio" name="difficulty" value="intermediate">
                            <span>中級</span>
                        </label>
                        <label>
                            <input type="radio" name="difficulty" value="advanced">
                            <span>上級</span>
                        </label>
                    </div>
                </div>
                
                <div class="setting-group">
                    <h3>先手/後手</h3>
                    <div class="radio-buttons">
                        <label>
                            <input type="radio" name="player-side" value="first" checked>
                            <span>先手（あなた）</span>
                        </label>
                        <label>
                            <input type="radio" name="player-side" value="second">
                            <span>後手（あなた）</span>
                        </label>
                    </div>
                </div>
                
                <div class="settings-buttons">
                    <button id="start-ai-game" class="btn primary-btn">
                        <i class="fas fa-play"></i> ゲーム開始
                    </button>
                    <button id="back-to-mode-selection" class="btn">
                        <i class="fas fa-arrow-left"></i> 戻る
                    </button>
                </div>
            </div>
        </div>
    </main>

    <!-- ヘルプダイアログ -->
    <div id="help-dialog" class="help-dialog" style="display: none;">
        <div class="help-content">
            <h3>将棋のルール</h3>
            
            <h4>基本ルール</h4>
            <p>将棋は2人で遊ぶボードゲームです。交互に駒を動かし、相手の王将（玉将）を詰ませることが目的です。</p>
            
            <h4>駒の動かし方</h4>
            <ul>
                <li><strong>王将/玉将</strong>：8方向に1マス</li>
                <li><strong>飛車</strong>：上下左右に何マスでも</li>
                <li><strong>角行</strong>：斜め方向に何マスでも</li>
                <li><strong>金将</strong>：上下左右と斜め前に1マス</li>
                <li><strong>銀将</strong>：斜め4方向と前に1マス</li>
                <li><strong>桂馬</strong>：前方の斜め2マス先（L字）</li>
                <li><strong>香車</strong>：前方向に何マスでも</li>
                <li><strong>歩兵</strong>：前に1マス</li>
            </ul>
            
            <h4>駒の成り（昇進）</h4>
            <p>駒が敵陣（1-3段目または7-9段目）に入るか、敵陣から動く場合、成ることができます。成ると動きが変わります。</p>
            
            <h4>持ち駒</h4>
            <p>相手の駒を取ると、その駒は自分の持ち駒になります。持ち駒は盤上の空いているマスに打つことができます。</p>
            
            <button id="close-help" class="btn">閉じる</button>
        </div>
    </div>

    <!-- 成り駒選択ダイアログ -->
    <div id="promotion-dialog" class="promotion-dialog" style="display: none;">
        <div class="promotion-content">
            <h3>駒を成りますか？</h3>
            <div class="promotion-pieces">
                <div class="promotion-option">
                    <div id="promote-yes" class="piece promoted">
                        <span id="promoted-char">と</span>
                    </div>
                    <p>成る</p>
                </div>
                <div class="promotion-option">
                    <div id="promote-no" class="piece">
                        <span id="normal-char">歩</span>
                    </div>
                    <p>成らない</p>
                </div>
            </div>
        </div>
    </div>

    <!-- AI思考中表示 -->
    <div id="ai-thinking" class="ai-thinking" style="display: none;">
        <div class="ai-thinking-content">
            <div class="spinner"></div>
            <p>AIが考え中...</p>
        </div>
    </div>

    <!-- 勝敗表示ダイアログ -->
    <div id="game-result-dialog" class="dialog" style="display: none;">
        <div class="dialog-content result-dialog">
            <h3 id="result-title">ゲーム終了</h3>
            <p id="result-message" class="result-message"></p>
            <div class="result-buttons">
                <button id="new-game-button" class="btn primary-btn">新しいゲーム</button>
                <button id="close-result-button" class="btn">閉じる</button>
            </div>
        </div>
    </div>

    <!-- 定数定義のスクリプト -->
    <script>
        // 持ち時間設定（秒）- AIインターフェースとmain.jsで共有
        const TIME_LIMIT = {
            NONE: 'none'     // 無制限
        };
        
        // AIの難易度レベル - 共通定義
        const AI_DIFFICULTY = {
            BEGINNER: 'beginner',    // 初級
            INTERMEDIATE: 'intermediate', // 中級
            ADVANCED: 'advanced'     // 上級
        };
        
        // プレイヤーの手番 - 共通定義
        const PLAYER_SIDE = {
            FIRST: 'first',  // 先手
            SECOND: 'second' // 後手
        };
    </script>
    
    <!-- JavaScriptの読み込み -->
    <script src="js/version.js?v=0.1.1"></script>
    <script src="js/pieces.js"></script>
    <script src="js/board.js"></script>
    <script src="js/ai/chess-engine.js"></script>
    <script src="js/ai/ai-interface.js"></script>
    <script src="js/main.js"></script>
    
    <!-- フッター -->
    <footer class="game-footer">
        <div class="container">
            <p>&copy; 2025 miyamoto-workspaces.site All Rights Reserved.</p>
            <p id="version-info">バージョン: <span id="game-version"></span></p>
        </div>
    </footer>
</body>
</html> 